# 开发环境配置与程序实体

## 设置 GOPATH 有什么意义？

为了集中组织代码，方便相互引用。

环境变量`GOPATH`可以是一个目录，也可以包含多个目录，每个目录都代表`Go`的一个工作区，用于存放源码文件(`source file`)、安装后的归档文件(`archive file`，后缀名为`.a`)和可执行文件(`executable file`)。

## 源码的构建与安装

源码导入从`src`开始搜索其子目录到指定代码包。产生的归档文件会放进`pkg`目录，产生可执行文件会被放入`bin`目录。如果构建的是库源码文件，那结果文件只会存在临时目录里，构建的意义在于检查和验证。如果构建的命令源码文件，结果文件会被搬运到源码所在目录中。构建和安装都会执行编译打包，而安装还会进行链接操作，如果安装的是库文件代码会放`pkg`目录，如果是安装的是命令源码，会放`bin`目录。

构建默认是不会编译依赖包的，但如果依赖包的归档文件不存在或源码有变化，依赖包会被编译。`go build project.go -a -v`强制编译并查看代码包编译过程，`go build -x -n`可以看到执行了哪些操作但不执行。

`go get`是从代码仓库中拉取代码包并放入`GOBIN`目录中

```bash
go get -u -t github.com/astaxie/beego # -u是下载并安装代码包，不管工作区中是否存在，-t是同时下载测试所需代码包
go get -d github.com/gin-gonic/gin # 只下载代码包
go get -fix github.com/kataras/iris # 下载后先运行根据当前版本修正代码的工具，再安装
go get -insecure github.com/smartystreets/goconvey # 允许使用非安全协议，如http
```

## 什么是程序实体？

在`Go`中，是变量、常量、函数、结构体和接口的统称，程序实体的名字叫标识符。

## 什么是库源码文件？

仅存放程序实体，可被调用。同一目录下的源码文件应该被声明属于同一代码包。声明的包名可以与目录不一致，导入路径与目录一致，而调用限定符要与生命的包名一致。标识符首字母大写为公有，可被包外代码调用，小写为私有。

## 类型推断有什么好处？

`Go`是静态类型的，在编译期就确定了类型，可以方便代码重构和维护，提升程序灵活性。

## 什么是重构？

不改变程序与外界的交互方式和规则，只改变其内部实现。

## 什么是代码块？

就是`JavaScript`的作用域，花括号组成代码块，`main`函数的代码块为空代码块，`Go`语言和源码共同形成了全域代码块。

变量重声明只发生在短变量声明时，变量只有一个，变量重声明类型始终一致。。重名变量，变量有多个，一山不容二虎，同一个作用域中，不能出现重名变量，嵌套作用域中，同名变量有屏蔽现象。

`import . package`会将包中公开的程序实体视作当前包的程序实体

## 什么是语法糖？

语法糖就是某种便捷措施。

## 关于类型断言

类型断言表达式必须是接口类型，`interface{}`的花括号表示不包含任何内容的数据类型。

```go
// 将container转换为空接口值，并判定是否为[]string类型
// 如果假，value=nil，ok=false
value, ok := interface{}(container).([]string)
```

## 什么是类型字面量？

类型字面量是表示数据结构本身的若干个字符，如`string`表示字符串类型

## 类型转换

1. 对于整数类型和整数常量之类的类型转换，只要源值在目标类型可表示范围内即为合法。如果目标类型范围过小，则转为补码，截掉高位
2. 整数值转为字符串类型，整数值应该是个有效的`UnicodeCodePoint`，否则将得到`�`
3. 字符串类型与各种切片类型之间互转，`UTF-8`字符集中三个字符代表一个汉字，`string`转`[]rune`时会被拆分成`Unicode`字符

## 别名类型

```go
// 别名类型
type type1 = string // 但[]type1和[]string是不同类型，因为它们潜在类型不同

// 新类型
type type2 string
```
